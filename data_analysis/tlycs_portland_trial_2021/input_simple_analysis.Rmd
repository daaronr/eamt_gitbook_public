# TLYCS Portland trial: background, data input, brief report

## The trial

In December 2021, TLYCS ran a YouTube advertising campaign in single city, involving 'donation advice'. The top 10% household income households were targeted with (one of?) three categories of videos.

The details are presented in our (currently private) gitbook [HERE](https://app.gitbook.com/o/-MfFk4CTSGwVOPkwnRgx/s/-Mf8cHxdwePMZXRTKnEE/contexts-and-environments-for-testing/tlycs/advisor-signup-portland)

## Capturing data

I (David Reinstein) did a manual 'create report and download' in TLYCS google analytics, basically as described [here](https://app.gitbook.com/o/-MfFk4CTSGwVOPkwnRgx/s/-Mf8cHxdwePMZXRTKnEE/methodological-discussion/implementation-and-collecting-data-issues/google-analytics-interface)

The report and it's parameters can be accessed [here](https://analytics.google.com/analytics/web/#/my-reports/mmZsQ-HMSbCwiG5hjQhWhQ/a10056556w22050110p185278310/_u.date00=20211203&_u.date01=20211231&_u.date10=20201203&_u.date11=20201231&197-table.advFilter=%5B%5B1,%22analytics.totalVisitors%22,%22GT%22,%220%22,0%5D%5D&197-table.plotKeys=%5B%5D&197-table.rowCount=5000&197-table-dataTable.sortColumnName=analytics.totalVisitors&197-table-dataTable.sortDescending=false&197-graphOptions.primaryConcept=analytics.totalVisitors&197-graphOptions.compareConcept=analytics.visits), if you have access. 


Report:

- 3-31 December 2021 vs prior year, same dates
- All North American cities with 1 or more user
    - TODO: fix to make it 1+ user for 2020 not 2021
- Counts: Users, sessions, certain types of conversions (see below)

I downloaded this as an Excel spreadsheet

`effective_giving_market_testing/data_do_not_commit/tlycs/tlycs_dec_2021_vs_2020_by_city_n_america_pos_users.xlsx`

(This is gitignored so it won't be 'committed' to our repo, at least for now)

## Input and clean data

```{r}


tl21 <- read_excel(here("data_do_not_commit","tlycs", "tlycs_dec_2021_vs_2020_by_city_n_america_pos_users.xlsx"), sheet = "Dataset1") %>% 
  as_tibble()

```

Create 'year' feature

```{r}

tl21 <- tl21 %>% mutate(
  year = case_when(
    str_detect(`Date Range`, "2021") == TRUE ~ 2021,
    str_detect(`Date Range`, "2020") == TRUE ~ 2020
  )
)

```

Create 'differences across years' features


## Exploratory analysis

## Casual/simple 'uptick' analysis

```{r}
tl21 %>% sumtab(Users, year)
tl21 %>% filter(!City=="Portland") %>% sumtab(Users, year)

tl21 %>% filter(Users>20) %>% sumtab(Users, year) #Fix -- filter on over 20 users for 2020 ONLY

tl21 %>% sumtab(Sessions, year)

```




